#//////////////////////////////////////////////////////////////////////////////
# NAME: model_emx_v2.yaml
# AUTHOR: david ruvolo,
# VERSION: 0.0.9100
# CREATED: 2021-10-26
# MODIFIED: 2021-11-02
# PURPOSE: Unified Rare Disease Data Model
# STATUS: in.progress
# COMMENTS:
#//////////////////////////////////////////////////////////////////////////////

tables:

  # @title Persons
  # @description This table provides an overview of the patients and any linked
  #   family members
  # @section Notes:
  #
  # The structure below follows the FairGenomes guidelines, but also adds input
  # from RD3 and COSAS.
  #
  # @section Questions:
  #
  - name: subjects
    description: Persons who are observed, analyzed, examined, investigated, experimented upon, or/and treated in the course of a particular study
    # semantics: http://purl.obolibrary.org/obo/ExO_0000127
    columns:
    
      - name: subjectID
        key: 1
        required: true
        columnType: STRING
        description: An individual who is the subject of personal data, persons to whom data refers, and from whom data are collected, processed, and stored.
        # semantics: "http://purl.obolibrary.org/obo/NCIT_C142495"

      - name: belongsToFamily
        required: true
        columnType: STRING
        description: A domestic group, or a number of domestic groups linked through descent (demonstrated or stipulated) from a common ancestor, marriage, or adoption.
        # semantics: "http://purl.obolibrary.org/obo/NCIT_C25173"
        
      - name: belongsToMother
        columnType: REF
        refTable: subjects
        refLabel: ${subjectID}
        description: A designation that has some relationship to motherhood.
        # semantics: "http://purl.obolibrary.org/obo/NCIT_C89336"
        
      - name: belongsToFather
        columnType: REF
        refTable: subjects
        refLabel: ${subjectID}
        description: Having to do with the father, coming from the father, or related through the father.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C94324
      
      - name: belongsWithFamilyMembers
        columnType: REF_ARRAY
        refTable: subjects
        refLabel: ${subjectID}
        description: Any individual related biologically or legally to another individual.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C21480

      # TODO: integrate lookup table when ready
      - name: inclusionStatus
        columnType: STRING
        # refTable: inclusionStatus
        # refLabel: ${value}
        description: An indicator that provides information on the current health status of this person.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C166244
      
      - name: dateOfBirth
        columnType: DATE
        description: The calendar date on which a person was born.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C68615
      
      # TODO: Add validation when expressions have been implemented
      - name: yearOfBirth
        columnType: INT
        # validation: if (yearOfBirth != dateOfBirth.split('-')[0]) 'yearOfBirth must match dateOfBirth' 
        description: The year in which a person was born.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C83164
      
      - name: dateOfDeath
        columnType: DATE
        description: The calendar date of subject's death
        # semantics: http://purl.obolibrary.org/obo/NCIT_C70810

      # TODO: Add validation when expressions have been implemented
      - name: ageAtDeath
        columnType: DECIMAL
        description: The age at which death occurred.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C135383
      
      # TODO: add lookup table when available
      - name: phenotypicSex
        columnType: STRING
        # refTable: phenotypicSex
        # refLabel: ${value}
        description: An organismal quality inhering in a bearer by virtue of the bearer's physical expression of sexual characteristics.
        # semantics: http://purl.obolibrary.org/obo/PATO_0001894
        
      # TODO: implement lookup table when ready
      - name: genotypicSex
        columnType: STRING
        description: A biological sex quality inhering in an individual based upon genotypic composition of sex chromosomes.
        # semantics: http://purl.obolibrary.org/obo/PATO_0020000
        

      # TODO: implement lookup table when ready
      - name: countryOfBirth
        columnType: STRING
        description: The country that this person was born in.
        # semantics: http://purl.obolibrary.org/obo/GENEPIO_0001094
        
      # TODO: implement lookup table when ready
      - name: countryOfResidence
        columnType: STRING
        description: Country of residence at enrollment.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C171105
        
      # TODO: implement lookup table when ready
      - name: ancestry
        columnType: STRING
        description: Population category defined using ancestry informative markers (AIMs) based on genetic/genomic data.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C176763
        
      - name: primaryAffiliation
        columnType: STRING_ARRAY
        description: The most significant institute for medical consultation and/or study inclusion in context of the genetic disease of this person.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C25412
      - name: contactPerson
        columnType: STRING
        description: A person acting as a channel for communication between groups or on behalf of a group.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C25461
        
      - name: contactEmail
        columnType: STRING
        description: Email address of the contact person or organization
        # semantics: http://purl.obolibrary.org/obo/MS_1000589
        
      - name: belongsWithDataRelease
        columnType: STRING_ARRAY
        description: The act of making data or other structured information accessible to the public or to the user group of a database.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C172217
        
      - name: alternativeIdentifiers
        columnType: STRING_ARRAY
        description: A backup sequence of characters used to identify an entity. 
        # semantics: http://purl.obolibrary.org/obo/NCIT_C90353

      - name: firstVisitDate
        columnType: DATE
        description: The date for the first patient visit.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C164021
        
      - name: belongsWithTwin
        columnType: BOOL
        description: Either of two offspring born from the same pregnancy.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C73427
      
      - name: fetalStatus
        columnType: BOOL
        description: Any tissue from a fetus.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C17730
      
      - name: consanguinity
        columnType: BOOL
        description: Genetic relatedness between individuals who are descendants of at least one common ancestor.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C71384
        
      - name: belongsToStudy
        columnType: REF_ARRAY
        refTable: study
        refLabel: ${studyID}
        description: Reference to the study or studies in which this person participates.
        # semantics: http://purl.obolibrary.org/obo/RO_0000056
      
      - name: comments
        columnType: STRING
        description: A written explanation, observation or criticism added to textual material.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C25393
      
      # refers to the datetime when the entry was created in the database
      - name: dateRecordCreated
        required: true
        columnType: DATETIME
        description: The date on which the activity or entity is created.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C164483
      
      # refers to the datetime when the entry was last updated in the database
      - name: dateRecordUpdated
        required: true
        columnType: DATETIME
        description: The date (and time) on which report was updated after it had been submitted.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C93629
      
        
  #////////////////////////////////////////////////////////////////////////////
  
  # @title Study
  # @description additional context for samples that indicates if they were
  #   collected for research purposes
  # @section Notes:
  #
  # @Section Questions:
  #
  - name: study
    description: A detailed examination, analysis, or critical inspection of one or multiple subjects designed to discover facts.
    # semantics: http://purl.obolibrary.org/obo/NCIT_C63536
    columns:
    
      - name: studyID
        required: true
        key: 1
        columnType: STRING
        description: A unique proper name or character sequence that identifies this particular study.
        # semantics: http://purl.obolibrary.org/obo/OMIABIS_0000006
      
      - name: name
        columnType: STRING
        description: A name that designates this study.
        # semantics: http://purl.obolibrary.org/obo/OMIABIS_0000037
      
      - name: description
        columnType: TEXT
        description: A statement or piece of writing that provides details on this study.
        # semantics: http://purl.obolibrary.org/obo/OMIABIS_0000036
      
      # TODO: implement lookup table when ready
      - name: inclusionCriteria
        columnType: STRING
        description: The conditions which, if met, make an person eligible for participation in this study.
        # semantics: http://purl.obolibrary.org/obo/OBI_0500027
        
      - name: principleInvestigator
        columnType: STRING
        description: The principle investigator or responsible person for this study.
        # semantics: http://purl.obolibrary.org/obo/OMIABIS_0000100
        
      - name: contactInformation
        columnType: STRING
        description: An email address for the purpose of contacting the study contact person.
        # semantics: http://purl.obolibrary.org/obo/OMIABIS_0000035
        
      - name: studyDescription
        columnType: TEXT
        description: A plan specification comprised of protocols (which may specify how and what kinds of data will be gathered) that are executed as part of this study.
        # semantics: http://purl.obolibrary.org/obo/OBI_0500000  
        
      - name: startDate
        columnType: DATE
        description: The date on which this study began.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C69208
        
      - name: completionDate
        columnType: DATE
        description: The date on which the concluding information for this study is completed. Usually, this is when the last subject has a final visit, or the main analysis has finished, or any other protocol-defined completion date.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C142702
      
      # TODO: create lookup table
      - name: studyStatus
        columnType: STRING
        description: 
        # semantics:
        
      - name: participantsEnrolled
        columnType: INT
        description: An integer specifying the quantity of study subjects enrolled in the study at the current time.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C153145
        
      # TODO: find tag
      - name: samplesCollected
        columnType: INT
        description: An integer specifying the quantity of samples collected at the current time.
        # semantics: 
      
      - name: comments
        columnType: STRING
        description: A written explanation, observation or criticism added to textual material.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C25393
      
      # refers to the datetime when the entry was created in the database
      - name: dateRecordCreated
        required: true
        columnType: DATETIME
        description: The date on which the activity or entity is created.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C164483
      
      # refers to the datetime when the entry was last updated in the database
      - name: dateRecordUpdated
        required: true
        columnType: DATETIME
        description: The date (and time) on which report was updated after it had been submitted.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C93629
  
  
  #////////////////////////////////////////////////////////////////////////////
  
  # @title Consent
  # @description table to capture consent information for a variety of situations
  # @section Notes:
  #
  # I'm not sure what to put in this table. I've added the RD3 items, but for zorg databases,
  # we do not usually collect this information. The GeneticLines consent is much different.
  #
  # @section Questions:
  #
  - name: consent
    description: Consent given by a patient to a surgical or medical procedure or participation in a study, examination or analysis after achieving an understanding of the relevant medical facts and the risks involved.
    # semantics: http://purl.obolibrary.org/obo/NCIT_C16735
    columns:
    
      - name: consentID
        key: 1
        required: true
        columnType: STRING
        description: A unique proper name or character sequence that identifies this particular signed individual consent.
        # semantics: http://purl.obolibrary.org/obo/ICO_0000044
    
      # I'm not sure how EMX2 works, but can a primary key also be a reference?
      # If not, add a second column that references back to the person
      - name: belongsToSubject
        columnType: REF
        refTable: subjects
        refLabel: ${subjectID}
        description: An individual who is the subject of personal data, persons to whom data refers, and from whom data are collected, processed, and stored.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C142495
      
      - name: collectedBy
        columnType: STRING
        description: Indicates the person, group, or institution who performed the collection act.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C45262
      
      - name: signingDate
        columnType: DATE
        description: A date specification that designates when this individual consent form was signed.
        # semantics: http://purl.obolibrary.org/obo/ICO_0000036
      
      - name: validFrom
        columnType: DATE
        description: Starting date of the validity of this individual consent.
        # semantics: http://purl.org/dc/terms/valid
      
      - name: validUntil
        columnType: DATE
        description: End date of the validity of this individual consent.
        # semantics: http://purl.org/dc/terms/valid
  
      - name: consentWithdrawn
        columnType: BOOL
        description: An indication that the consent to participate in the study or one or more segments of the study has been revoked.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C176342
      
      # some how I need to fit in match maker permission and incidental findings
      # Should these be put in a ref_ARRAY and then added to the DataUsePersmissions lookup?
      # I think for specificity, RD3 opted for wide format rather than nesting this information
      # into one column.
      - name: dataUsePermission
        description: A data item that is used to indicate consent permissions for datasets and/or materials, and relates to the purposes for which datasets and/or material might be used.
        # semantics: http://purl.obolibrary.org/obo/DUO_0000001
        
      - name: dataUseModifiers
        columnType: STRING_ARRAY
        description: Data use modifiers indicate additional conditions for use. For instance, a dataset is restricted to investigations into specific diseases or performed at specific geographical locations.
        # semantics: http://purl.obolibrary.org/obo/DUO_0000017
        
      - name: dataUseSpecification
        columnType: TEXT
        description: Further specification of applied data use permissions and modifiers. For example, a list of countries in case of geographic restrictions or a list of diseases when restricted to disease-specific research.
        # semantics: http://semanticscience.org/resource/SIO_000090
        
      - name: allowIncidentalFindingRecontact
        columnType: BOOL
        description: A planned process for a subject agrees not to be informed about any incidental finding.
        # semantics: http://purl.obolibrary.org/obo/ICO_0000178
        
      - name: allowMatchmaker
        columnType: BOOL
        description: Permission is given for MatchMaking
        
      - name: allowRecontacting
        columnType: BOOL
        description: The procedure of recontacting the patient for specified reasons. This means the patient agrees to be re-identifiable under those circumstances.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C25737

      - name: comments
        columnType: STRING
        description: A written explanation, observation or criticism added to textual material.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C25393
      
      - name: dateRecordCreated
        required: true
        columnType: DATETIME
        description: The date on which the activity or entity is created.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C164483
      
      - name: dateRecordUpdated
        required: true
        columnType: DATETIME
        description: The date (and time) on which report was updated after it had been submitted.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C93629
  
  #////////////////////////////////////////////////////////////////////////////
  
  # @title Clinical
  # @description metadata on clinical events including phenotypic information
  #   and diagnostic information
  # @section Notes:
  #
  # In some projects, this information is stored in the subjects table. However,
  # I like the Fair Genomes approach of separating this information. This module
  # is heavily influenced by FAIR Genomes, but the handling of linked family
  # members is different. If a family member is affected or has been sequenced,
  # then they will be added as a new record.
  #
  # Records are usually tied to a person rather than a unique clinical identifier.
  #
  # 1. I didn't add age at last screening. We usually don't have that information
  # 2. We also don't include medication or drug regimen
  # 3. Family members affected and sequenced is a bit tricky. If information family
  #     members are affected and sequenced, a new record would be created
  # 4. We also don't collect medical history (but we could)
  # 5. 'affectedStatus' could replace 'functioning'
  # 6. consanguinity is usually listed in the persons table. Should this be moved here?
  # 7. first contact is usually included inthe persons table. Move it here?
  #
  # In many projects, we have another reference list for phenotypes. We usually create
  # additional columns of each phenotypic attribute and use the FairGenomes columns
  # to map project data to HPO.
  #
  # @section Questions:
  #
  - name: clinical
    description: Findings and circumstances relating to the examination and treatment of a patient.
    # semantics: http://purl.obolibrary.org/obo/NCIT_C25398
    columns:
    
      - name: clinicalID
        key: 1
        required: true
        columnType: STRING
        description: A unique proper name or character sequence that identifies this particular clinical examination.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C87853

      - name: belongsToSubject
        columnType: REF
        refTable: subjects
        refLabel: ${subjectID}
        description: An individual who is the subject of personal data, persons to whom data refers, and from whom data are collected, processed, and stored.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C142495

      - name: affectedStatus
        columnType: BOOL
        description: Individuals in a pedigree who exhibit the specific phenotype under study.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C64917
      - name: dateOfDiagnosis
        columnType: DATE
        description: The date on which a diagnosis of disease was made.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C164339
        
      - name: ageAtDiagnosis
        columnType: DECIMAL
        description: The age (in years), measured from some defined time point (e.g. birth) at which a patient is diagnosed with a disease.
        # semantics: http://purl.bioontology.org/ontology/SNOMEDCT/423493009
        
      - name: ageOfOnset
        columnType: DECIMAL
        description: Age (in years) of onset of clinical manifestations related to the disease of the patient.
        # semantics: http://www.orpha.net/ORDO/Orphanet_C023    
        
      # TODO: implement lookup table
      - name: observedPhenotype
        columnType: STRING
        description: The outward appearance of the individual. In medical context, these are often the symptoms caused by a disease.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C16977
      
      # TODO: implement lookup table
      - name: unobservedPhenotype
        columnType: STRING
        description: Phenotypes or symptoms that were looked for but not observed, which may help in differential diagnosis or establish incomplete penetrance.
        # semantics: http://purl.bioontology.org/ontology/HL7/C0442737
      
      # COSAS attribute
      # TODO: implement lookup table
      - name: provisionalPhenotype
        columnType: STRING
        description: The test or procedure was successfully performed, but the results are borderline and can neither be declared positive / negative nor detected / not detected according to the current established criteria.
        # semantics: http://purl.bioontology.org/ontology/HL7/C0332241
        
      # TODO: implement lookup table
      - name: clinicalDiagnosis
        columnType: STRING
        description: A diagnosis made from a study of the signs and symptoms of a disease.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C15607

      # TODO: implement lookup table
      - name: molecularDiagnosis
        columnType: STRING
        description: Gene affected by pathogenic variation that is causal for disease of the patient.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C20826
        
      - name: molecularDiagnosisOther
        columnType: STRING
        description: Causal variant in HGVS notation with optional classification or free text explaining any other molecular mechanisms involved.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C20826
        
      # RD3 Attribute
      # I think the resolved term is good here. We could change it to solved
      # to fit with the NCIT ontology, but I'm not sure if that term fits 100%
      # Should this attribute also reference a new lookup table?
      # Or http://purl.bioontology.org/ontology/SNOMEDCT/723506003?
      - name: resolved
        columnType: BOOL
        description: The satisfactory closure of a data item query.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C142482
        
      # I'm not sure the ontology term is correct. Maybe there is a better one?
      # Maybe the generic date: http://purl.obolibrary.org/obo/NCIT_C25164?
      - name: dateResolved
        columnType: DATE
        description: The date (and time) when the adverse event ends or returns to baseline.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C93718
        
      - name: belongsToMaterial
        columnType: REF_ARRAY
        refTable: material
        refLabel: ${materialID}
        description: A unique proper name or character sequence that identifies this particular material.	
        # semantics: http://purl.obolibrary.org/obo/NCIT_C93400
      
      - name: comments
        columnType: STRING
        description: A written explanation, observation or criticism added to textual material.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C25393
      
      - name: dateRecordCreated
        required: true
        columnType: DATETIME
        description: The date on which the activity or entity is created.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C164483
      
      - name: dateRecordUpdated
        required: true
        columnType: DATETIME
        description: The date (and time) on which report was updated after it had been submitted.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C93629

  #////////////////////////////////////////////////////////////////////////////
  
  # @title Material
  # @description matadata about the samples collected
  # @section Notes:
  #
  # @section Questions:
  #
  - name: material
    description: A natural substance derived from living organisms such as cells, tissues, proteins, and DNA.
    # semantics: http://purl.obolibrary.org/obo/NCIT_C43376
    columns:
    
      - name: materialID
        key: 1
        required: true
        description: A unique proper name or character sequence that identifies this particular material.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C93400
        
      - name: belongsToSubject
        columnType: REF
        refTable: subjects
        refLabel: ${subjectID}
        description: An individual who is the subject of personal data, persons to whom data refers, and from whom data are collected, processed, and stored.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C142495
        
      - name: belongsToRequest
        columnType: STRING
        description: A sequence of letters, numbers, or other characters that specifically identifies a particular order.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C164567
      
      # TODO: integrate lookup table when ready (labIndication)
      - name: samplingReason
        columnType: STRING
        description: The explanation for why a test, measurement, or assessment is executed.  
        # semantics: http://purl.obolibrary.org/obo/NCIT_C171003
        
      - name: samplingTimestamp
        columnType: DATETIME
        description: Date and time at which this material was collected.
        # semantics: http://www.ebi.ac.uk/efo/EFO_0000689
        
      - name: samplingProtocol
        columnType: TEXT
        description: The procedure whereby this material was sampled for an analysis.
        # semantics: http://www.ebi.ac.uk/efo/EFO_0005518
      
      - name: samplingProtocolDeviation
        columnType: STRING
        description: A variation from processes or procedures defined in the sampling protocol. Deviations usually do not preclude the overall evaluability of subject data for either efficacy or safety, and are often acknowledged and accepted in advance by the sponsor.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C50996
        
      - name: reasonForSamplingProtocolDeviation
        columnType: TEXT
        description: The rationale for why a deviation from the sampling protocol has occurred.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C93529
        
      # TODO: implement reference entity
      - name: biospecimenType
        columnType: STRING
        description: The type of material taken from a biological entity for testing, diagnostic, propagation, treatment or research purposes.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C70713
        
      # TODO: integrate lookup table
      - name: anatomicalSource
        columnType: STRING
        description: Biological entity that constitutes the structural organization of an individual member of a biological species from which this material was taken.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C103264
        
      # TODO: integrate lookup table
      - name: pathologicalState
        columnType: STRING
        description: The pathological state of the tissue from which this material was derived.
        # semantics: http://purl.obolibrary.org/obo/GO_0001894
      
      - name: biospecimenUsability
        columnType: STRING
        description: An indication as to whether a biospecimen is suitable for testing purposes.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C171004
        
      - name: alternativeIdentifiers
        columnType: STRING_ARRAY
        description: A backup sequence of characters used to identify an entity. 
        # semantics: http://purl.obolibrary.org/obo/NCIT_C90353
        
      - name: comments
        columnType: STRING
        description: A written explanation, observation or criticism added to textual material.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C25393
      
      - name: dateRecordCreated
        required: true
        columnType: DATETIME
        description: The date on which the activity or entity is created.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C164483
      
      - name: dateRecordUpdated
        required: true
        columnType: DATETIME
        description: The date (and time) on which report was updated after it had been submitted.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C93629
        
  #////////////////////////////////////////////////////////////////////////////
    
  - name: samplePreparation
    description: A sample preparation for a nucleic acids sequencing assay.
    # semantics: http://purl.obolibrary.org/obo/OBI_0001902
    columns:
    
      - name: sampleID
        key: 1
        required: true
        columnType: STRING
        description: A unique proper name or character sequence that identifies this particular sample preparation.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C132299
    
      - name: belongsToMaterial
        columnType: REF
        refTable: material
        refLabel: ${materialID}
        description: A unique proper name or character sequence that identifies this particular material.	
        # semantics: http://purl.obolibrary.org/obo/NCIT_C93400
    
      # - name: belongsToSubject
      #   columnType: REF
      #   refTable: subjects
      #   refLabel: ${subjectID}
      #   description: An individual who is the subject of personal data, persons to whom data refers, and from whom data are collected, processed, and stored.
      #   # semantics: http://purl.obolibrary.org/obo/NCIT_C142495
        
      # - name: belongsToRequest
      #   columnType: STRING
      #   description: A sequence of letters, numbers, or other characters that specifically identifies a particular order.
      #   # semantics: http://purl.obolibrary.org/obo/NCIT_C164567
      
      - name: inputAmount
        columnType: INT
        description: Amount of input material in nanogram (ng).
        # semantics: http://purl.allotrope.org/ontologies/role#AFRL_0000010

      # TODO: insert reference table when ready
      - name: libraryPreparationKit
        columnType: STRING
        description: Pre-filled, ready-to-use reagent cartridges intented to improve chemistry, cluster density and read length as well as improve quality (Q) scores for this sample. Reagent components are encoded to interact with the sequencing system to validate compatibility with user-defined applications.
        # semantics: http://purl.obolibrary.org/obo/GENEPIO_0000085

      - name: pcrFree
        columnType: STRING
        description: Indicates whether a polymerase chain reaction (PCR) was used to prepare this sample. PCR is a method for amplifying a DNA base sequence using multiple rounds of heat denaturation of the DNA and annealing of oligonucleotide primers complementary to flanking regions in the presence of a heat-stable polymerase.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C17003
        
      # TODO: insert reference table when ready
      - name: targetEnrichmentKit
        columnType: STRING
        description: Indicates which target enrichment kit was used to prepare this sample. Target enrichment is a pre-sequencing DNA preparation step where DNA sequences are either directly amplified (amplicon or multiplex PCR-based) or captured (hybrid capture-based) in order to only focus on specific regions of a genome or DNA sample.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C154307

      - name: umIsPresent
        columnType: STRING
        description: Indicates whether any unique molecular identifiers (UMIs) are present. An UMI barcode is a short nucleotide sequence that is used to identify reads originating from an individual mRNA molecule.

      - name: intendedInsertSize
        columnType: INT
        description: In paired-end sequencing, the DNA between the adapter sequences is the insert. The length of this sequence is known as the insert size, not to be confused with the inner distance between reads. So, fragment length equals read adapter length (2x) plus insert size, and insert size equals read lenght (2x) plus inner distance.
        # semantics: https://w3id.org/fair-genomes/resource/FG_0000001

      - name: intendedReadLength
        columnType: INT
        description: The number of nucleotides intended to be ordered from each side of a nucleic acid fragment obtained after the completion of a sequencing process.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C153362

      - name: barcode
        columnType: STRING
        description: A machine-readable representation of information in a visual format on a surface.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C43361
      
      - name: comments
        columnType: STRING
        description: A written explanation, observation or criticism added to textual material.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C25393
      
      - name: dateRecordCreated
        required: true
        columnType: DATETIME
        description: The date on which the activity or entity is created.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C164483
      
      - name: dateRecordUpdated
        required: true
        columnType: DATETIME
        description: The date (and time) on which report was updated after it had been submitted.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C93629

  #////////////////////////////////////////////////////////////////////////////
  
  # @title Sequencing
  # @description
  # @section Notes:
  #
  # @section Questions:
  #
  - name: sequencing
    description: The determination of complete (typically nucleotide) sequences, including those of genomes (full genome sequencing, de novo sequencing and resequencing), amplicons and transcriptomes.
    # semantics: http://edamontology.org/topic_3168
    columns:
      - name: sequencingID
        key: 1
        required: true
        columnType: STRING
        description: A unique proper name or character sequence that identifies this particular nucleic acid sequencing assay.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C171337
    
      - name: belongsToSample
        columnType: REF
        description: A unique proper name or character sequence that identifies this particular sample preparation.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C132299
        
      # - name: belongsToSubject
      #   columnType: REF
      #   refTable: subjects
      #   refLabel: ${subjectID}
      #   description: An individual who is the subject of personal data, persons to whom data refers, and from whom data are collected, processed, and stored.
      #   # semantics: http://purl.obolibrary.org/obo/NCIT_C142495

      - name: sequencingDate
        columnType: DATE
        description: Date on which this sequencing assay was performed.
        # semantics: http://purl.obolibrary.org/obo/GENEPIO_0000069

      # TODO: insert reference table when ready or use ROR links
      - name: sequencingFacilityOrganization
        columnType: STRING
        description: An organization that provides sequence determination service
        # semantics: http://purl.obolibrary.org/obo/OBI_0001891
      
      # TODO: insert reference table when ready
      - name: sequencingPlatform
        columnType: STRING
        description: The used sequencing platform (i.e. brand, name of a company that produces sequencer equipment).
        # semantics: http://purl.obolibrary.org/obo/GENEPIO_0000071
        
      # TODO: insert reference table when ready
      - name: sequencingInstrumentModel
        columnType: STRING
        description: The used product name and model number of a manufacturer's genomic (dna) sequencer.
        # semantics: http://purl.obolibrary.org/obo/GENEPIO_0001921

      # TODO: insert reference table when ready
      - name: sequencingMethod
        columnType: STRING
        description: Method used to determine the order of bases in a nucleic acid sequence.
        # semantics: http://purl.obolibrary.org/obo/FIX_0000704
        
      - name: averageReadDepth
        columnType: INT
        description: The average number of times a particular locus (site, nucleotide, amplicon, region) was sequenced.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C155320
        
      - name: observedReadLength
        columnType: INT
        description: The number of nucleotides successfully ordered from each side of a nucleic acid fragment obtained after the completion of a sequencing process.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C153362

      - name: observedInsertSize
        columnType: INT
        description: In paired-end sequencing, the DNA between the adapter sequences is the insert. The length of this sequence is known as the insert size, not to be confused with the inner distance between reads. So, fragment length equals read adapter length (2x) plus insert size, and insert size equals read lenght (2x) plus inner distance.
        # semantics: https://w3id.org/fair-genomes/resource/FG_0000002

      - name: percentageQ30
        columnType: DECIMAL
        description: Percentage of reads with a Phred quality score over 30, which indicates less than a 1/1000 chance that the base was called incorrectly.
        # semantics: http://purl.obolibrary.org/obo/GENEPIO_0000089
        
      - name: percentageTR20
        columnType: DECIMAL
        description: Percentage of the target sequence on which 20 or more unique reads were successfully mapped.
        # semantics: https://w3id.org/fair-genomes/resource/FG_0000003
        
      - name: otherQualityMetrics
        columnType: TEXT
        description: Other NGS quality control metrics, including but not limited to (i) sequencer metrics such as yield, error rate, density (K/mm2), cluster PF (%) and phas/prephas (%), (ii) alignment metrics such as QM insert size, GC content, QM duplicated reads (%), QM error rate, uniformity/evenness of coverage and maternal cell contamination, and (iii) variant call metrics such as number of SNVs/CNVs/SVs called, number of missense/nonsense variants, common variants (%), unique variants (%), gender match and trio inheritance check.
        # semantics: http://edamontology.org/data_3914
      
      # TODO: insert reference table here
      - name: referenceGenomeUsed
        columnType: STRING
        description: The specific build of the human genome used as reference for sequence alignment and variant calling.
        # semantics: http://edamontology.org/data_2340
        
      - name: comments
        columnType: STRING
        description: A written explanation, observation or criticism added to textual material.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C25393
      
      - name: dateRecordCreated
        required: true
        columnType: DATETIME
        description: The date on which the activity or entity is created.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C164483
      
      - name: dateRecordUpdated
        required: true
        columnType: DATETIME
        description: The date (and time) on which report was updated after it had been submitted.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C93629
    
  #////////////////////////////////////////////////////////////////////////////
  
  # @title Files
  # @description metadata about the files that were generated post-analysis
  #
  # @section Notes:
  #
  # - If we are including the analysis table, insert link to the table's
  #   primary key. Otherwise, use sequencing ID
  #
  # @section Question:
  #
  - name: files
    description: A set of related records (either written or electronic) kept together.
    # semantics: http://purl.obolibrary.org/obo/NCIT_C42883
    columns:

      - name: filename
        required: true
        key: 1
        columnType: STRING
        description: The literal identifier for an electronic file. 
        # semantics: http://purl.obolibrary.org/obo/NCIT_C171191
      
      # TODO: implement lookup table when ready
      - name: belongsToSequencing
        required: true
        columnType: STRING
        description: A unique proper name or character sequence that identifies this particular nucleic acid sequencing assay.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C171337

      - name: belongsToSubject
        required: true
        columnType: REF
        refTable: subjects
        refLabel: ${subjectID}
        description: An individual who is the subject of personal data, persons to whom data refers, and from whom data are collected, processed, and stored.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C142495

      - name: server
        columnType: STRING
        description: A computer which provides some service for other computers connected to it via a network. 
        # semantics: http://purl.obolibrary.org/obo/NCIT_C48297
      
      - name: path
        required: true
        columnType: STRING
        description: The specification of a node (file or directory) in a hierarchical file system, usually specified by listing the nodes top-down.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C47922
      
      - name: format
        columnType: STRING
        description: The format of an electronic file.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C171252
        
      - name: size
        columnType: INT
        description: The size of an electronic file in bytes.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C171276

      - name: dateCreated
        columnType: DATE
        description: The date a digital resource was created.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C69199
      
      - name: md5
        columnType: STRING
        description: A 32-character hexadecimal number that is computed on a file.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C171276
      
      - name: uploaded
        columnType: BOOL
        description: An indication that a submitted file has successfully been uploaded to a data repository.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C172862
        
      - name: released
        columnType: BOOL
        description: An indication that a file has been released to the users of a database or data repository. 
        # semantics: http://purl.obolibrary.org/obo/NCIT_C172876
      
      - name: invalid
        columnType: BOOL
        description: An indication that a file has invalid data or is in an invalid format and cannot be submitted to a data repository.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C172867
      
      - name: alternativeFileId
        columnType: STRING
        description: A backup sequence of characters used to identify an entity.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C90353
        
      - name: comments
        columnType: STRING
        description: A written explanation, observation or criticism added to textual material.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C25393
      
      - name: dateRecordCreated
        required: true
        columnType: DATETIME
        description: The date on which the activity or entity is created.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C164483
      
      - name: dateRecordUpdated
        required: true
        columnType: DATETIME
        description: The date (and time) on which report was updated after it had been submitted.
        # semantics: http://purl.obolibrary.org/obo/NCIT_C93629
  
